# main.py
#
# ะญัะพ ัะฐะผัะน ะปะตะฝะธะฒัะน ัะฟะพัะพะฑ ะฟัะพะฒะตัะธัั, ะบัััะธััั ะปะธ ะผะพัะพั.
# ะะตะท ะธะฝัะตััะตะนัะพะฒ, ะฑะตะท ะณัะฐัะธะบะธ โ ะฟัะพััะพ ะฒะฒะพะดะธะผ 1, 2 ะธะปะธ 3.
# ะ ะตัะปะธ ััะพ-ัะพ ะฝะต ัะฐะฑะพัะฐะตั โ ะฒะธะฝะพะฒะฐั ะฝะต ัั, ะฐ ะบะฐะฑะตะปั ๐

from src.modbus_controller import ModbusController

# ะัะพะฑัะตะผ ะฟะพะดะบะปััะธัััั ะบ ะผะพัะพัั.
# ะัะปะธ COM-ะฟะพัั ะฝะต ัะพั โ ะฑัะดะตั ะพั.
motor = ModbusController(port='COM12', baudrate=115200)

print("๐ FAB Autosteer โ ัััะฝะพะน ัะตัั ะผะพัะพัะฐ")
print("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n")
print("ะงัะพ ะผะพะถะฝะพ ะดะตะปะฐัั:")
print(" [1] โ ะะพะฒะตัะฝััั ะฒะปะตะฒะพ")
print(" [2] โ ะะพะฒะตัะฝััั ะฒะฟัะฐะฒะพ")
print(" [3] โ ะััะฐะฝะพะฒะธัั")
print(" [q] ะัะนัะธ\n")

while True:
    cmd = input("๐ ะะฒะตะดะธัะต ะบะพะผะฐะฝะดั: ").strip()

    if cmd == '1':
        print("โช๏ธ  ะะปะตะฒะพ ะฝะฐ 150 ัะบะพัะพััะธ")
        motor.turn_left(150)
    elif cmd == '2':
        print("โฉ๏ธ  ะะฟัะฐะฒะพ ะฝะฐ 150 ัะบะพัะพััะธ")
        motor.turn_right(150)
    elif cmd == '3':
        print("โน๏ธ  ะกัะพะฟ. ะัะดััะฐะตะผ.")
        motor.stop()
    elif cmd.lower() == 'q':
        print("๐ ะััะพะด. ะะพัะพั ะฟัะพัะฐะตััั ั ัะพะฑะพะน.")
        break
    else:
        print("โ ะฏ ัะฐะบะพะณะพ ะฝะต ะทะฝะฐั. ะะฒะตะดะธ 1, 2, 3 ะธะปะธ q.")
